(function(t){function e(e){for(var o,a,s=e[0],c=e[1],u=e[2],d=0,f=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(i,a)&&i[a]&&f.push(i[a][0]),i[a]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);l&&l(e);while(f.length)f.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],o=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(o=!1)}o&&(r.splice(e--,1),t=a(a.s=n[0]))}return t}var o={},i={app:0},r=[];function a(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=t,a.c=o,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)a.d(n,o,function(e){return t[e]}.bind(null,o));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/tsm-editor/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"13db":function(t,e,n){},"1ddd":function(t,e,n){},"22e5":function(t,e,n){"use strict";var o=n("f797"),i=n.n(o);i.a},2652:function(t,e,n){"use strict";var o=n("bd47"),i=n.n(o);i.a},"43d7":function(t,e,n){"use strict";var o=n("5dbb"),i=n.n(o);i.a},"4a5b":function(t,e,n){},"50ef":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o,i,r=n("2b0e"),a=n("2bdd"),s=n.n(a),c=n("353a"),u=n.n(c),l=n("3181"),d=n.n(l),f=(n("96cf"),n("1da1")),p=n("ade3"),m=n("2f62"),h=(n("d3b7"),n("8e73")),g=n.n(h),v=g()("lzw");function b(){var t=window.location.hash;return t&&t.length>1?v.decompress(t.substr(1)).then((function(t){return t.formula})):new Promise((function(t,e){return e(Error("Parse error"))}))}function w(t){return null===t||t.length<1?new Promise((function(t,e){return e(Error("Nothing to save"))})):v.compress({formula:t}).then((function(t){var e="#".concat(t);return e!==window.location.hash&&window.history.pushState(window.location.pathname,null,e),t}))}r["a"].use(m["a"]);var y="UpdatePriceString",C="UpdateCleanupFlag",E="UpdateSaveTimeout",_="UpdateDebugFlag",S="GetPriceString",R="SavePriceString",x=new m["a"].Store({state:{debug:!1,priceString:"check(first(Crafting, DBMarket, DBRegionMarketAvg), max(0.25 * avg(Crafting, DBMarket, DBRegionMarketAvg), 1.5 * VendorSell))",saveTimeout:null,cleanUpFlag:!0},getters:{priceString:function(t){return t.priceString},debug:function(t){return t.debug},cleanUpSyntax:function(t){return t.cleanUpFlag}},mutations:(o={},Object(p["a"])(o,y,(function(t,e){t.priceString=e})),Object(p["a"])(o,C,(function(t,e){t.cleanUpFlag=e})),Object(p["a"])(o,E,(function(t,e){t.saveTimeout=e})),Object(p["a"])(o,_,(function(t,e){t.debug=e})),o),actions:(i={},Object(p["a"])(i,S,(function(t){var e=t.commit;return Object(f["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,b().then((function(t){return e(y,t),t})).catch((function(){}));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})))()})),Object(p["a"])(i,R,(function(t){var e=t.commit,n=t.state;return Object(f["a"])(regeneratorRuntime.mark((function t(){var o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n.saveTimeout&&(window.clearTimeout(n.saveTimeout),e(E,null),n.debug&&console.log("Canceling pending save.")),o=window.setTimeout((function(){void 0!==n.priceString&&(w(n.priceString).catch(console.log),n.debug&&console.log("Saved."))}),1e3),e(E,o);case 3:case"end":return t.stop()}}),t)})))()})),i)}),T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("section",{staticClass:"panel",attrs:{id:"editor"}},[t._m(0),t._m(1),n("p",[t._v(" Paste your string below or just start typing to try it out! ")]),n("div",{staticClass:"editor-status right"},[n("Tooltip",{staticClass:"tooltip",attrs:{position:"bottom-left",text:"Reformats your string to make it more readable!"}},[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.cleanUpSyntax,expression:"cleanUpSyntax"}],staticClass:"check",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.cleanUpSyntax)?t._i(t.cleanUpSyntax,null)>-1:t.cleanUpSyntax},on:{change:function(e){var n=t.cleanUpSyntax,o=e.target,i=!!o.checked;if(Array.isArray(n)){var r=null,a=t._i(n,r);o.checked?a<0&&(t.cleanUpSyntax=n.concat([r])):a>-1&&(t.cleanUpSyntax=n.slice(0,a).concat(n.slice(a+1)))}else t.cleanUpSyntax=i}}}),n("span",{staticClass:"text"},[t._v("Beautify")])])])],1),n("Editor",{ref:"editor",attrs:{cleanUpSyntax:t.cleanUpSyntax},model:{value:t.priceString,callback:function(e){t.priceString=e},expression:"priceString"}})],1),n("section",{staticClass:"panel",attrs:{id:"reference"}},[n("h2",[t._v("Reference")]),n("CommandReference")],1),n("footer",[t._v(" Made with ❤️ by trenchy ")])])},O=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hero"},[n("h1",[t._v("TSM Price String Editor")]),n("p",[t._v("Custom Price Strings Made Easy and Beautiful")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v(" Hi goblin! This tool makes it easy to create new custom price strings for the "),n("a",{attrs:{target:"_new",href:"https://www.tradeskillmaster.com/"}},[t._v("TradeSkillMaster")]),t._v(" addon in World of Warcraft. It provides some syntax highlighting as well as autocomplete features to make writing new formulas easy and readable. ")])}],I=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"editor-container"},[n("div",{staticClass:"editor",style:{height:t.containerHeight+"px"}},[n("Dropdown",{staticClass:"dropdown",attrs:{position:t.dropdownPosition,visible:t.dropdownIsVisible,results:t.dropdownCompletions},on:{change:t.onDropdownSelect},model:{value:t.dropdownSelection,callback:function(e){t.dropdownSelection=e},expression:"dropdownSelection"}}),n("EditorRender",{ref:"editor",staticClass:"editor-render"}),n("EditorEvent",{staticClass:"editor-event",attrs:{shouldReformat:t.cleanUpSyntax}})],1),n("div",{staticClass:"editor-status"},[n("Button",{attrs:{type:"xsmall link",icon:"clipboard",onClick:t.copyToClipboard}},[t._v(" Copy to Clipboard ")])],1)])},D=[],k=(n("99af"),new r["a"]),$=k,P={SET_EDITOR_STATE:"Editor.SetState",SET_EDITOR_COPY_TO_CLIPBOARD:"Editor.CopyToClipboard",EDITOR_INPUT:"Events.OnInput",EDITOR_SCROLLHEIGHT_CHANGED:"Editor.ScrollHeightChanged",EDITOR_CARET_CHANGED:"Editor.SelectionCaretChanged",EDITOR_KEYDOWN:"Editor.KeyDown",EDITOR_KEYUP:"Editor.KeyUp",EDITOR_CLICK:"Editor.OnClick",EDITOR_BLUR:"Editor.OnBlur"},j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Syntax",{attrs:{code:t.content}})],1)},B=[],A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"ide",domProps:{innerHTML:t._s(t.stylizedContent)}})},U=[],H=(n("4160"),n("a15b"),n("d81d"),n("b0c0"),n("4d63"),n("ac1f"),n("25f0"),n("5319"),n("841c"),n("159b"),n("4de4"),n("d4ec")),N=n("bee2"),M=function(){function t(e,n,o){Object(H["a"])(this,t),this.name=e,this.args=n,this.definition=o}return Object(N["a"])(t,[{key:"getCompletion",value:function(){return"".concat(this.name,"(")}}]),t}(),F=function(){function t(e,n){Object(H["a"])(this,t),this.name=e,this.definition=n}return Object(N["a"])(t,[{key:"getCompletion",value:function(){return this.name}}]),t}(),L=[new F("DBHistorical","Historical Price"),new F("DBMarket","Market Value"),new F("DBMinBuyout","Minimum Buyout Value"),new F("DBRegionHistorical","Region Historical Price"),new F("DBRegionMarketAvg","Region Market Value Average"),new F("DBRegionMinBuyoutAvg","Region Minimum Buyout Average"),new F("DBRegionSaleAvg","Region Sale Average"),new F("DBRegionSaleRate","Number of sales of the item compared to how many expire or get cancelled"),new F("DBRegionSoldPerDay","Number of times the item sells per day on average"),new F("NumExpires","Number of times the item has expired since the last time it was sold"),new F("ItemQuality","Item Quality (0 = poor, 1 = common, 2 = uncommon, 3 = rare, 4 = epic, 5 = legendary)"),new F("ItemLevel","The item level of the item"),new F("RequiredLevel","The level required to use or equip the item"),new F("Destroy","Value of materials if you were to destroy the item"),new F("VendorBuy","Cost if you were to buy the item from a vendor"),new F("VendorSell","Value if you were to sell the item to the vendor"),new F("AvgBuy","Average Buy Price"),new F("AvgSell","Average Sell Price"),new F("Crafting","Total cost of crafting the item (sum of all MatPrices for the item)"),new F("MatPrice","The cost of a single crafting material"),new F("MinSell","Minimum sell price that you sold the item"),new F("MinBuy","Minimum buy price that you bought the item"),new F("MaxBuy","Max buy price that you purchased the item"),new F("MaxSell","Max sell price that you sold the item"),new F("BaseItem","Reference the base item (without item variations)")],K=[new M("min",["n.."],"Returns the numerical minimum of the prices in the list"),new M("max",["n.."],"Returns the numerical maximum of the prices in the list"),new M("first",["n.."],"Returns the first valid price in the list"),new M("avg",["n.."],"Returns the average of the prices in the list"),new M("check",["n","b","c"],"If the first parameter is greater than 0 return the second parameter, otherwise return the third parameter"),new M("convert",["variable"],"Returns the lowest cost conversion of the item being evaluated"),new M("ifgt",["a","b","x","y"],"Returns x if a is greater than b, otherwise it returns y"),new M("ifgte",["a","b","x","y"],"Returns x if a is greater than or equal to b, otherwise it returns y"),new M("iflt",["a","b","x","y"],"Returns x if a is less than b, otherwise it returns y"),new M("iflte",["a","b","x","y"],"Returns x if a is less than or equal to b, otherwise it returns y"),new M("ifeq",["a","b","x","y"],"Returns x if a is equal to b, otherwise it returns y"),new M("round",["x","y"],"Rounds x to the nearest multiple of y"),new M("roundup",["x","y"],"Rounds x up to the nearest multiple of y"),new M("rounddown",["x","y"],"Rounds x down to the nearest multiple of y")],G=[new F("[Item Link]","Reference an item by link"),new F("i:ID","Reference an item by ID")];function V(t){var e=new RegExp(t.replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\[/g,"\\[").replace(/\]/g,"\\]"),"ig");return{functions:K.filter((function(t){return e.test(t.name)})),symbols:L.filter((function(t){return e.test(t.name)}))}}var Y=function(t,e,n){return{search:t,replace:function(t,n){return e?t(n,e):function(e,o){return t(n,o)}},item:n||null}},W=function(t,e){return'<span class="token '.concat(t.join(" "),'">').concat(e,"</span>")},q=Y(/(\d+g)/g),z=Y(/(\d+s)/g),J=Y(/(\d+c)/g),Q=Y(/\(/g,"("),X=Y(/\)/g,")"),Z=[Y(/\//g,"/"),Y(/-/g,"-"),Y(/\*/g,"*"),Y(/\+/g,"+")],tt=[Y(/%/g,"%")],et=Y(/(,)/g),nt=Y(/(\d+\.?\d{0,}|\.?\d+)/g),ot=[Y(/(\[.+\])/g),Y(/(i:(\d+|ID))/g),Y(/(item:(\d+|ID))/g)],it=K.map((function(t){return Y(new RegExp("(".concat(t.name,"\\s?\\()"),"gi"),null,t)})),rt=L.map((function(t){return Y(new RegExp("(".concat(t.name,")"),"gi"),null,t)}));function at(t,e,n,o){return function(i){return t(i),Z.forEach((function(t){e(t,n,["maths"])})),tt.forEach((function(t){e(t,n,["percent"])})),ot.forEach((function(t){e(t,n,["item"])})),it.forEach((function(t){e(t,n,["function"])})),rt.forEach((function(t){e(t,n,["symbol"])})),e(Q,n,["parens","lparen"]),e(X,n,["parens","rparen"]),e(q,n,["currency","gold"]),e(z,n,["currency","silver"]),e(J,n,["currency","copper"]),e(et,n,["punc"]),e(nt,n,["numeric"]),o(i)}}var st=function(t,e){var n=e;return t.map((function(t){switch(t){case"maths":case"item":n=" ".concat(n," ");break;case"punc":n=", ";break;case"function":it.forEach((function(t){var e=t.search,o=t.item;n=n.replace(e,"".concat(o.name,"("))}));break;case"symbol":rt.forEach((function(t){var e=t.search,o=t.item;n=n.replace(e,o.name)}));break;default:break}return null})),n};function ct(t){var e="";return at((function(t){e=t}),(function(t,n,o){e=e.replace(t.search,t.replace(n,o))}),t,(function(){return e}))}var ut=ct(st),lt=ct(W),dt={name:"Syntax",props:{code:String},computed:{stylizedContent:function(){return lt(this.code)}}},ft=dt,pt=(n("f98b"),n("2877")),mt=Object(pt["a"])(ft,A,U,!1,null,"71b87976",null),ht=mt.exports,gt={name:"EditorRender",components:{Syntax:ht},data:function(){return{content:""}},mounted:function(){var t=this;$.$on(P.EDITOR_INPUT,(function(e){t.content=e}))}},vt=gt,bt=Object(pt["a"])(vt,j,B,!1,null,null,null),wt=bt.exports,yt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"editor",attrs:{id:"editor-event",contenteditable:"true",spellcheck:"false"},on:{input:t.onInput,keydown:t.onKeyDown,keyup:t.onKeyUp,click:t.onClick,blur:t.onBlur,paste:t.onPaste}})},Ct=[],Et=function t(e,n){Object(H["a"])(this,t),this.x=e,this.y=n},_t=function t(e,n,o,i){Object(H["a"])(this,t),this.x=e,this.y=n,this.width=o,this.height=i};function St(){var t=window.getSelection();return t.rangeCount>0&&!0===t.getRangeAt(0).collapsed?t.getRangeAt(0):null}function Rt(t){try{var e=t.getRangeAt(0).cloneRange();if(e.getClientRects){e.collapse(!0);var n=e.getClientRects(),o=n.length>0?n[0]:null;if(o)return new _t(o.left,o.top,0,o.height)}}catch(i){}return new _t(0,0,0,0)}function xt(){var t=Rt(window.getSelection());return new Et(t.x,t.y+t.height)}function Tt(t){t.collapse(!0);var e=window.getSelection();e.removeAllRanges(),e.addRange(t)}function Ot(t,e,n){return t.substring(0,n.startOffset)+e+t.substring(n.endOffset)}n("caad"),n("07ac"),n("2532");var It={UP:38,DOWN:40,LEFT:37,RIGHT:39,ESCAPE:27,ENTER:13,SHIFT:16,TAB:9};function Dt(t){return Object.values(It).filter((function(t){return t!==It.LEFT&&t!==It.RIGHT})).includes(t)}var kt=It,$t={name:"EditorEvent",props:{shouldReformat:Boolean},data:function(){return{content:""}},mounted:function(){var t=this;$.$on(P.SET_EDITOR_STATE,(function(e){e.string&&(t.content=e.string,t.$refs.editor.innerText=e.string,$.$emit(P.EDITOR_INPUT,e.string)),e.caret&&t.$nextTick((function(){var n=document.createRange();n.setStart(t.$refs.editor.childNodes[0],e.caret.start),n.setEnd(t.$refs.editor.childNodes[0],e.caret.start+e.caret.length),Tt(n)}))})),$.$on(P.SET_EDITOR_COPY_TO_CLIPBOARD,(function(){var e=document.createRange();e.selectNodeContents(t.$refs.editor);var n=window.getSelection();n.removeAllRanges(),n.addRange(e),document.execCommand("copy")}))},methods:{onInput:function(t){this.content=t.target.innerText,$.$emit(P.EDITOR_SCROLLHEIGHT_CHANGED,t.target.scrollHeight),$.$emit(P.EDITOR_INPUT,t.target.innerText),this.$nextTick((function(){$.$emit(P.EDITOR_CARET_CHANGED,{position:xt(),range:St()})}))},onKeyDown:function(t){var e=Dt(t.keyCode);return $.$emit(P.EDITOR_KEYDOWN,{event:t,isControlKey:e}),e&&(t.preventDefault(),t.stopPropagation()),!e},onKeyUp:function(t){return $.$emit(P.EDITOR_KEYUP,{event:t,isControlKey:Dt(t.keyCode)}),!1},onPaste:function(t){t.preventDefault();var e=t.clipboardData.getData("text/plain").replace(/\n/g," ");!0===this.shouldReformat&&(e=ut(e)),this.content=e,this.$refs.editor.innerText=e,$.$emit(P.EDITOR_SCROLLHEIGHT_CHANGED,t.target.scrollHeight),$.$emit(P.EDITOR_INPUT,e);var n=document.createRange();return n.setStart(this.$refs.editor.childNodes[0],e.length),n.setEnd(this.$refs.editor.childNodes[0],e.length),Tt(n),!1},onClick:function(t){return $.$emit(P.EDITOR_CLICK,t),!1},onBlur:function(t){return $.$emit(P.EDITOR_BLUR,t),!1}}},Pt=$t,jt=Object(pt["a"])(Pt,yt,Ct,!1,null,null,null),Bt=jt.exports,At=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"dropdown panel",style:t.positionCSS},[n("ul",[t._l(t.results.symbols,(function(e,o){return n("SymbolDropdown",{key:"symbol"+o,class:o===t.value?"selected":"",attrs:{item:e},nativeOn:{click:function(n){return t.onClickItem(e)},mouseover:function(e){return t.onHoverItem(o)}}})})),t._l(t.results.functions,(function(e,o){return n("FunctionDropdown",{key:"function"+o,class:o+t.results.symbols.length===t.value?"selected":"",attrs:{item:e},nativeOn:{click:function(n){return t.onClickItem(e)},mouseover:function(e){return t.onHoverItem(o+t.results.symbols.length)}}})}))],2),n("div",{staticClass:"hint"},[n("Icon",{attrs:{name:"bulb"}}),t._v(" Hit enter or tab to insert ")],1),n("div",{directives:[{name:"show",rawName:"v-show",value:t.debug,expression:"debug"}],staticClass:"debug-panel panel"},[n("div",[t._v("Active Option: "+t._s(t.selectedIndex))]),n("div",{staticClass:"position"},[t._v("Position: "+t._s(t.position.x)+", "+t._s(t.position.y))])])])},Ut=[],Ht=(n("a9e3"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"dropdown-row panel"},[n("Syntax",{staticClass:"name",attrs:{code:t.item.name+"("+t.item.args.join(", ")+")"}}),n("Icon",{staticClass:"function",attrs:{name:"function"}}),n("p",{staticClass:"definition"},[t._v(" "+t._s(t.item.definition)+" ")])],1)}),Nt=[],Mt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i",{class:"icon "+t.name})},Ft=[],Lt={name:"Icon",props:{name:{type:String,default:"nope"}}},Kt=Lt,Gt=(n("d7ee"),Object(pt["a"])(Kt,Mt,Ft,!1,null,"3339b743",null)),Vt=Gt.exports,Yt={name:"FunctionDropdown",components:{Icon:Vt,Syntax:ht},props:{item:Object}},Wt=Yt,qt=(n("f306"),Object(pt["a"])(Wt,Ht,Nt,!1,null,"4dd4e085",null)),zt=qt.exports,Jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"dropdown-row panel"},[n("Icon",{staticClass:"symbol",attrs:{name:"symbol"}}),n("Syntax",{staticClass:"name",attrs:{code:t.item.name}}),n("p",{staticClass:"definition"},[t._v(" "+t._s(t.item.definition)+" ")])],1)},Qt=[],Xt={name:"SymbolDropdown",components:{Icon:Vt,Syntax:ht},props:{item:Object}},Zt=Xt,te=(n("681e"),Object(pt["a"])(Zt,Jt,Qt,!1,null,"691b9926",null)),ee=te.exports,ne=void 0,oe={name:"Dropdown",components:{FunctionDropdown:zt,SymbolDropdown:ee,Icon:Vt},props:{visible:{type:Boolean,default:!1},position:{type:Object,default:function(){return new Et(0,0)}},value:Number,results:Object,debug:Boolean},data:function(){return{selectedIndex:{get:function(){return ne.value},set:function(t){return ne.onHoverItem(t)}}}},methods:{onClickItem:function(t){this.$emit("change",t)},onHoverItem:function(t){this.$emit("input",t)}},computed:{positionCSS:function(){var t=this.position.x;if(this.$el){var e=this.$el.getBoundingClientRect();t=Math.min(t,window.innerWidth-e.width)}return{position:"absolute",left:"".concat(t,"px"),top:"".concat(this.position.y,"px"),visibility:this.visible?"visible":"hidden"}}}},ie=oe,re=(n("6fb4"),Object(pt["a"])(ie,At,Ut,!1,null,"24da2dea",null)),ae=re.exports,se=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{class:"button "+t.type,on:{click:t.handleClick}},[n("Icon",{directives:[{name:"show",rawName:"v-show",value:t.icon&&t.icon.length>0===!0,expression:"icon && icon.length > 0 === true"}],staticClass:"icon",attrs:{name:t.icon}}),n("span",{staticClass:"text"},[t._t("default")],2)],1)},ce=[],ue={name:"Button",components:{Icon:Vt},props:{icon:String,onClick:Function,type:{type:String,default:"action normal"}},methods:{handleClick:function(t){this.onClick&&this.onClick(t)}}},le=ue,de=(n("9240"),Object(pt["a"])(le,se,ce,!1,null,"17f669a7",null)),fe=de.exports;n("1276");function pe(t){return t.split(/[\s\(\)\{\}]+/)}var me={name:"Editor",components:{EditorRender:wt,EditorEvent:Bt,Dropdown:ae,Button:fe},props:{value:String,cleanUpSyntax:Boolean},data:function(){return{containerHeight:120,inputIsFromEditor:!1,dropdownSearchTerm:"",dropdownPosition:new Et(0,0),dropdownSelection:0,dropdownCompletions:{functions:[],symbols:[]},keyPressCount:0,currentCaretRange:null}},computed:{dropdownIsVisible:function(){return this.dropdownCompletions.functions.length>0||this.dropdownCompletions.symbols.length>0}},mounted:function(){$.$emit(P.SET_EDITOR_STATE,{string:this.value}),$.$on(P.EDITOR_SCROLLHEIGHT_CHANGED,this.onEditorScrollHeightChanged),$.$on(P.EDITOR_INPUT,this.onEditorInput),$.$on(P.EDITOR_CARET_CHANGED,this.onEditorCaretPositionChange),$.$on(P.EDITOR_KEYDOWN,this.onEditorKeyDown),$.$on(P.EDITOR_KEYUP,this.onEditorKeyUp),$.$on(P.EDITOR_BLUR,this.onEditorBlur)},watch:{value:function(t){this.inputIsFromEditor||$.$emit(P.SET_EDITOR_STATE,{string:t}),this.inputIsFromEditor=!1}},methods:{onEditorInput:function(t){this.inputIsFromEditor=!0,this.$emit("input",t)},onEditorScrollHeightChanged:function(t){this.containerHeight=t},onEditorKeyDown:function(t){var e=t.event,n=t.isControlKey;if(this.dropdownIsVisible&&n){switch(e.keyCode){case kt.UP:this.keyPressCount-=1;break;case kt.DOWN:this.keyPressCount+=1;break;case kt.ESCAPE:this.dismissDropdown();break;case kt.ENTER:case kt.TAB:this.onDropdownSelect(this.dropdownCompletions.symbols.concat(this.dropdownCompletions.functions)[this.dropdownSelection]);break;default:break}var o=this.dropdownCompletions.functions.length+this.dropdownCompletions.symbols.length;this.dropdownSelection=(this.keyPressCount%o+o)%o}},onEditorKeyUp:function(t){var e=t.event;!this.dropdownIsVisible||e.keyCode!==kt.LEFT&&e.keyCode!==kt.RIGHT||this.dismissDropdown()},onEditorCaretPositionChange:function(t){var e=t.range,n=t.position;this.currentCaretRange=e;var o=this.value.substr(0,e.startOffset);if(o&&o.length>2){var i=pe(o);if(i.length>0&&i[i.length-1].length>1){var r=this.$el.getBoundingClientRect();this.dropdownSearchTerm=i[i.length-1],this.dropdownCompletions=V(this.dropdownSearchTerm),this.dropdownSelection=0,this.dropdownPosition=new Et(n.x-r.left,n.y-r.top)}}},onEditorBlur:function(){var t=this;setTimeout((function(){t.dismissDropdown()}),250)},dismissDropdown:function(){this.dropdownCompletions={functions:[],symbols:[]},this.dropdownSelection=0,this.keyPressCount=0},onDropdownSelect:function(t){var e=this,n=this.currentCaretRange.cloneRange();if(n){n.setStart(n.startContainer,n.startOffset-this.dropdownSearchTerm.length);var o=n.startOffset,i=Ot(this.value,t.getCompletion(),n);this.$nextTick((function(){$.$emit(P.SET_EDITOR_STATE,{string:i,caret:{start:o+t.getCompletion().length,length:0}}),e.dismissDropdown()}))}},copyToClipboard:function(){$.$emit(P.SET_EDITOR_COPY_TO_CLIPBOARD)}}},he=me,ge=(n("43d7"),Object(pt["a"])(he,I,D,!1,null,"071bc410",null)),ve=ge.exports,be=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"reference"},[n("section",{staticClass:"functions"},[n("h3",[n("Icon",{attrs:{name:"function"}}),t._v(" Functions")],1),n("section",{staticClass:"sub-panel"},t._l(t.functions,(function(t,e){return n("FunctionReference",{key:"function"+e,staticClass:"row function-row",attrs:{item:t}})})),1)]),n("section",{staticClass:"symbols"},[n("h3",[n("Icon",{attrs:{name:"symbol"}}),t._v(" Variables")],1),n("section",{staticClass:"sub-panel"},[t._l(t.specialFeatures,(function(t,e){return n("SymbolReference",{key:"feat"+e,staticClass:"row symbol-row",attrs:{item:t}})})),t._l(t.symbols,(function(t,e){return n("SymbolReference",{key:"symbol"+e,staticClass:"row symbol-row",attrs:{item:t}})}))],2)])])},we=[],ye=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Syntax",{staticClass:"name",attrs:{code:t.item.name+"("+t.item.args.join(", ")+")"}}),n("p",{staticClass:"definition"},[t._v(" "+t._s(t.item.definition)+" ")])],1)},Ce=[],Ee={name:"FunctionReference",components:{Syntax:ht},props:{item:Object}},_e=Ee,Se=(n("7612"),Object(pt["a"])(_e,ye,Ce,!1,null,"2a2b2bcd",null)),Re=Se.exports,xe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("Syntax",{staticClass:"name",attrs:{code:t.item.name}}),n("p",{staticClass:"definition"},[t._v(" "+t._s(t.item.definition)+" ")])],1)},Te=[],Oe={name:"SymbolReference",components:{Syntax:ht},props:{item:Object}},Ie=Oe,De=(n("22e5"),Object(pt["a"])(Ie,xe,Te,!1,null,"670e7aa6",null)),ke=De.exports,$e={name:"CommandReference",components:{FunctionReference:Re,SymbolReference:ke,Icon:Vt},data:function(){return{symbols:L,functions:K,specialFeatures:G}}},Pe=$e,je=(n("bac8"),Object(pt["a"])(Pe,be,we,!1,null,"95005592",null)),Be=je.exports,Ae=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"tooltip"},[t._t("default"),n("span",{class:"tooltip-text "+t.position},[t._v(t._s(t.text))])],2)},Ue=[],He={name:"Tooltip",props:{text:String,position:{type:String,default:"bottom-right"}}},Ne=He,Me=(n("2652"),Object(pt["a"])(Ne,Ae,Ue,!1,null,"313a0baa",null)),Fe=Me.exports,Le={name:"app",components:{Editor:ve,CommandReference:Be,Tooltip:Fe},computed:{priceString:{get:function(){return this.$store.getters.priceString},set:function(t){this.$store.commit(y,t),this.$store.dispatch(R,t)}},cleanUpSyntax:{get:function(){return this.$store.getters.cleanUpSyntax},set:function(t){this.$store.commit(C,t)}}},mounted:function(){var t=this;this.$store.dispatch(S).then((function(e){t.$gtag.pageview({page_path:window.location.pathname+window.location.hash}),t.priceString=e}))}},Ke=Le,Ge=(n("700c"),n("5c64"),Object(pt["a"])(Ke,T,O,!1,null,"101ecad9",null)),Ve=Ge.exports,Ye=u()({apiKey:"1a5d9bde039258ef72cf342d7057f654",appVersion:"1.2.3"});Ye.use(d.a,r["a"]),r["a"].use(s.a,{config:{id:"UA-49351028-1"},enabled:!0}),r["a"].config.productionTip=!1,new r["a"]({render:function(t){return t(Ve)},store:x}).$mount("#app")},"5c64":function(t,e,n){"use strict";var o=n("d32a"),i=n.n(o);i.a},"5dbb":function(t,e,n){},"681e":function(t,e,n){"use strict";var o=n("aa0a"),i=n.n(o);i.a},"6fb4":function(t,e,n){"use strict";var o=n("e634"),i=n.n(o);i.a},"700c":function(t,e,n){"use strict";var o=n("f45f"),i=n.n(o);i.a},7612:function(t,e,n){"use strict";var o=n("13db"),i=n.n(o);i.a},9240:function(t,e,n){"use strict";var o=n("c2f9"),i=n.n(o);i.a},aa0a:function(t,e,n){},b0de:function(t,e,n){},bac8:function(t,e,n){"use strict";var o=n("50ef"),i=n.n(o);i.a},bd47:function(t,e,n){},c2f9:function(t,e,n){},d32a:function(t,e,n){},d7ee:function(t,e,n){"use strict";var o=n("b0de"),i=n.n(o);i.a},e634:function(t,e,n){},f306:function(t,e,n){"use strict";var o=n("4a5b"),i=n.n(o);i.a},f45f:function(t,e,n){},f797:function(t,e,n){},f98b:function(t,e,n){"use strict";var o=n("1ddd"),i=n.n(o);i.a}});
//# sourceMappingURL=app.a76790bb.js.map